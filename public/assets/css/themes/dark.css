[data-theme="dark"] {
    /* =========================================
       Dark Mode Overrides
       ========================================= */

    /* Backgrounds */
    --bg-canvas: var(--slate-950);
    /* Deep dark background */
    --bg-surface: var(--slate-900);
    /* Slightly lighter for cards */
    --bg-surface-hover: var(--slate-800);
    --bg-primary: var(--blue-600);
    --bg-primary-hover: var(--blue-700);
    /* blue-800 */
    --bg-primary-subtle: rgba(37, 99, 235, 0.2);
    /* Based on blue-600 */
    --bg-danger-subtle: rgba(239, 68, 68, 0.1);
    --bg-danger-hover: rgba(239, 68, 68, 0.2);
    /* Translucent blue */

    /* Text & Content */
    --text-main: var(--slate-100);
    /* Light text for dark bg */
    --text-muted: var(--slate-400);
    --text-inverse: var(--paragraph-light);
    --text-primary: var(--blue-600);
    /* blue-600 (unified with brand) */
    --text-danger: #f87171;
    /* red-400 */

    /* Borders */
    --border-subtle: var(--slate-800);
    --border-default: var(--slate-700);

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.5), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.3);

    /* Mappings for Backward Compatibility (Legacy) */
    --primary-color: var(--bg-primary);
    --hover-color: var(--bg-primary-subtle);
    --secondary-color: var(--cyan-500);
    --tertiary-color: var(--slate-700);
    --background-color: var(--bg-canvas);
    --heavy-color: var(--blue-300);
    --text-color: var(--text-main);
    --blacktext-color: var(--slate-50);
    --theme-color: var(--bg-surface);
    --shadow: var(--shadow-md);

    /* Dossier Patient Specific Overrides */
    --primary-blue: var(--bg-primary);
    --primary-blue-hover: var(--bg-primary-hover);
    --secondary-bg: var(--bg-canvas);
    --card-bg: var(--bg-surface);
    --text-light: var(--text-muted);
    --primary-light-bg: var(--bg-primary-subtle);
    --neutral-bg-hover: var(--bg-surface-hover);
    --neutral-border: var(--border-default);
}

/* Enhancements for Dark Mode - Invert Icons to White */
[data-theme="dark"] img.icon,
[data-theme="dark"] svg.icon,
[data-theme="dark"] nav section a:not(#active) img,
[data-theme="dark"] .btn-edit-patient img,
[data-theme="dark"] .btn-icon-small img,
[data-theme="dark"] .patient-avatar img,
[data-theme="dark"] .doctor-avatar,
[data-theme="dark"] .icon-box svg,
[data-theme="dark"] .doc-link svg {
    filter: invert(1) hue-rotate(180deg) brightness(1.2);
    background: transparent;
}

/* Smooth transitions for theme changes */
*,
*::before,
*::after {
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.1s ease, box-shadow 0.2s ease;
}